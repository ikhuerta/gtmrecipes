<!-- Internal campaigns by Iñaki Huerta: blog.ikhuerta.com -->
<script> 
// Use 1: Tag your URLs with: ic_medium, ic_source, etc... as you do with normal campaigns (and remember to setup all ga views to ignore this vars)
// Use 2: (if you use jQuery) Tag your internal links with "internal-campaign" class and setup the values in a data-ic attribute. Example: <a href="..." class="banner internal-campaign" data-ic="ic_medium=banners&ic_source=home-slider">...</a>
// Use 3: With Javascript use the function gaic.r() to set up your internal campaign. Example gaic.r('ic_medium=text-links&ic_source=list-sidebar');

var gaic = function () { gaic.r( gaic.c(),'|'); gaic.r(location.search.substring(1) );}
gaic.ns = '(not set)'; gaic.cn = '_gaic'; gaic.v = 0; gaic.k = { 'ic_medium' : 'medium', 'ic_source' : 'source', 'ic_campaign' : 'campaign', 'ic_term' : 'term', 'ic_content' : 'content', 'ic_referrer' : 'referrer', 'ic_landing' : 'landing' };gaic.gk = function ( k ){ for (var i in gaic.k) if ( k == gaic.k[i] ) return i; }
gaic.r = function ( s , c) { if (!s) return; if (!c) c = '&';if (!gaic.v) { gaic.v = {};	var f = 1;	} else f = 0; s = s.split(c); var r = 0; for(var i in s) { s[i] = s[i].split('='); if ( gaic.k[s[i][0]] && !f ) { var r=1; break; } } if (r) { for ( var i in gaic.k ) gaic.v[gaic.k[i]] = gaic.ns; gaic.v.referrer = document.referrer; gaic.v.landing = location.pathname; };for(var i in s) { if ( gaic.k[s[i][0]] ) { gaic.v[gaic.k[s[i][0]]] = s[i][1]; if (!f) var r=1; } }gaic.d();gaic.s(); }
gaic.d = function () { for ( var i in gaic.k ) if ( !gaic.v[gaic.k[i]] ) gaic.v[gaic.k[i]] = gaic.ns; }; gaic.c = function () { var re = new RegExp( gaic.cn+'=([^;]+)(;.+)?$'); var pd = document.cookie.match( re ); return (pd && pd[1]) ? pd[1] : ''; }; gaic.s = function () { var s = '';	for (i in gaic.v ) s += gaic.gk(i) + '=' + gaic.v[i] + '|'; document.cookie = gaic.cn+'='+s; }; 
gaic.get = function (k) { return (k) ? gaic.v[k] : gaic.v; }; gaic();

if(window.jQuery){ window.jQuery(function () { window.jQuery('.internal-campaign').bind('click',function () { gaic.r( $(this).data('ic') ); }); });}
</script>